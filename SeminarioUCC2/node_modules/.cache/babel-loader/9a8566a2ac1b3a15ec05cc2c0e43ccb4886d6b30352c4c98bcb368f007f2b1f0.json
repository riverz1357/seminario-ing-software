{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSearchParams}from'react-router-dom';import'../styles/ConfirmAttendance.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConfirmAttendance=()=>{const[searchParams]=useSearchParams();const[message,setMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const idcode=searchParams.get('idcode');const confirmAttendance=async attendanceNum=>{setIsLoading(true);const apiUrl=process.env.REACT_APP_API_URL||'http://localhost:3001';try{const response=await fetch(`${apiUrl}/users/confirm-attendance?idcode=${idcode}&attendanceNumber=${attendanceNum}`,{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){setMessage('Attendance confirmed.');}else{setMessage('Error confirming attendance.');}}catch(error){setMessage('Error connecting to the server.');}setIsLoading(false);};useEffect(()=>{if(!idcode){setMessage('Invalid QR code.');}},[idcode]);return/*#__PURE__*/_jsx(\"div\",{className:\"confirm-attendance-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-attendance-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"confirm-attendance-title\",children:\"Confirm Attendance\"}),message?/*#__PURE__*/_jsx(\"p\",{className:\"confirm-attendance-message\",children:message}):/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-attendance-buttons\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"confirm-attendance-instruction\",children:\"Select your attendance type:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmAttendance(1),disabled:isLoading,className:\"confirm-attendance-button\",children:\"Morning\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmAttendance(2),disabled:isLoading,className:\"confirm-attendance-button\",children:\"Afternoon\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmAttendance(3),disabled:isLoading,className:\"confirm-attendance-button\",children:\"Full Day\"})]}),isLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"confirm-attendance-loading\",children:\"Loading...\"})]})});};export default ConfirmAttendance;","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","jsx","_jsx","jsxs","_jsxs","ConfirmAttendance","searchParams","message","setMessage","isLoading","setIsLoading","idcode","get","confirmAttendance","attendanceNum","apiUrl","process","env","REACT_APP_API_URL","response","fetch","method","headers","ok","error","className","children","onClick","disabled"],"sources":["E:/PROGRAMACION/seminario-ing-software/SeminarioUCC2/src/components/ConfirmAttendance.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport '../styles/ConfirmAttendance.css';\r\n\r\nconst ConfirmAttendance = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const [message, setMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const idcode = searchParams.get('idcode');\r\n\r\n  const confirmAttendance = async (attendanceNum) => {\r\n    setIsLoading(true);\r\n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:3001';\r\n    try {\r\n      const response = await fetch(`${apiUrl}/users/confirm-attendance?idcode=${idcode}&attendanceNumber=${attendanceNum}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        setMessage('Attendance confirmed.');\r\n      } else {\r\n        setMessage('Error confirming attendance.');\r\n      }\r\n    } catch (error) {\r\n      setMessage('Error connecting to the server.');\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!idcode) {\r\n      setMessage('Invalid QR code.');\r\n    }\r\n  }, [idcode]);\r\n\r\n  return (\r\n    <div className=\"confirm-attendance-container\">\r\n      <div className=\"confirm-attendance-card\">\r\n        <h2 className=\"confirm-attendance-title\">Confirm Attendance</h2>\r\n        {message ? (\r\n          <p className=\"confirm-attendance-message\">{message}</p>\r\n        ) : (\r\n          <div className=\"confirm-attendance-buttons\">\r\n            <p className=\"confirm-attendance-instruction\">Select your attendance type:</p>\r\n            <button \r\n              onClick={() => confirmAttendance(1)} \r\n              disabled={isLoading}\r\n              className=\"confirm-attendance-button\"\r\n            >\r\n              Morning\r\n            </button>\r\n            <button \r\n              onClick={() => confirmAttendance(2)} \r\n              disabled={isLoading}\r\n              className=\"confirm-attendance-button\"\r\n            >\r\n              Afternoon\r\n            </button>\r\n            <button \r\n              onClick={() => confirmAttendance(3)} \r\n              disabled={isLoading}\r\n              className=\"confirm-attendance-button\"\r\n            >\r\n              Full Day\r\n            </button>\r\n          </div>\r\n        )}\r\n        {isLoading && <p className=\"confirm-attendance-loading\">Loading...</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmAttendance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}